{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>ğŸ® Detalles del Juego Compartido</h2>

<h3>ğŸ§‘â€ğŸ¤â€ğŸ§‘ Usuarios que han pagado</h3>
<ul>
    {% for payment in paid_users %}
        <li>{{ payment.user.username }} - <span style="color: green;">Pagado âœ…</span></li>
    {% empty %}
        <li>No hay usuarios que hayan pagado aÃºn.</li>
    {% endfor %}
</ul>

<h3>â³ Usuarios pendientes de pago</h3>
<ul>
    {% for payment in pending_users %}
        <li>{{ payment.user.username }} - <span style="color: red;">Pendiente âŒ</span></li>
    {% empty %}
        <li>No hay usuarios pendientes de pago.</li>
    {% endfor %}
</ul>

<h3>ğŸ“¥ Estado de tu pago</h3>
{% if user_has_paid %}
    <p>Â¡Has pagado! Puedes descargar el juego.</p>
{% else %}
    <p>Tu pago estÃ¡ pendiente. Haz clic en el botÃ³n para completar el pago.</p>
    {% for payment in pending_users %}
        {% if payment.user == request.user %}
            <form method="post" action="{% url 'complete_shared_payment' payment.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-success btn-sm">Pagar</button>
            </form>
        {% endif %}
    {% endfor %}
{% endif %}

<!-- BotÃ³n para volver a la biblioteca -->
<div class="mt-4">
    <a href="{% url 'user_library' %}" class="btn btn-primary">ğŸ“š Volver a la Biblioteca</a>
</div>

{% endblock %}
